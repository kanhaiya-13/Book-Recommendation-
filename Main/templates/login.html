{% extends "layout.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
        <div class="content-section">
            <div class="text-center mb-4">
                <div class="login-icon">
                    <i class="fas fa-sign-in-alt"></i>
                </div>
                <h2 class="text-gradient">Welcome Back</h2>
                <p class="text-muted">Sign in to continue your reading journey</p>
            </div>
            
            <form method="POST" action="" class="login-form">
                {{ form.hidden_tag() }}
                
                <div class="form-grp">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <i class="fas fa-envelope"></i>
                            </span>
                        </div>
                        {{ form.email(class="form-control", placeholder="Enter your email") }}
                    </div>
                    {% if form.email.errors %}
                        <div class="error-message">
                            {% for error in form.email.errors %}
                                <small class="text-danger">
                                    <i class="fas fa-exclamation-circle me-1"></i>{{ error }}
                                </small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-grp">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <i class="fas fa-lock"></i>
                            </span>
                        </div>
                        {{ form.password(class="form-control", placeholder="Enter your password", id="password") }}
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    {% if form.password.errors %}
                        <div class="error-message">
                            {% for error in form.password.errors %}
                                <small class="text-danger">
                                    <i class="fas fa-exclamation-circle me-1"></i>{{ error }}
                                </small>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-grp">
                    <div class="form-check">
                        {{ form.remember(class="form-check-input") }}
                        {{ form.remember.label(class="form-check-label") }}
                    </div>
                </div>

                <div class="form-grp text-center">
                    {{ form.submit(class="btn btn-outline-info btn-block btn-lg") }}
                </div>
            </form>

            <div class="text-center mt-4">
                <div class="divider">
                    <span>or</span>
                </div>
                
                <div class="social-login">
                    <button class="btn btn-social btn-google">
                        <i class="fab fa-google me-2"></i>Continue with Google
                    </button>
                    <button class="btn btn-social btn-facebook">
                        <i class="fab fa-facebook-f me-2"></i>Continue with Facebook
                    </button>
                </div>
            </div>

            <div class="text-center mt-4">
                <small class="text-muted">
                    Don't have an account? 
                    <a href="{{ url_for('register') }}" class="text-gradient">Sign up here</a>
                </small>
                <br>
                <small class="text-muted">
                    <a href="#" class="text-gradient">Forgot your password?</a>
                </small>
            </div>
        </div>
    </div>
</div>

<style>
.login-icon {
    font-size: 3rem;
    background: var(--accent-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 1rem;
}

.input-group-text {
    background: var(--glass-bg);
    border: 2px solid var(--glass-border);
    border-right: none;
    color: var(--text-secondary);
    backdrop-filter: blur(10px);
}

.input-group .form-control {
    border-left: none;
    border-radius: 0 15px 15px 0;
}

.input-group-prepend .input-group-text {
    border-radius: 15px 0 0 15px;
}

.error-message {
    margin-top: 0.5rem;
}

.divider {
    position: relative;
    text-align: center;
    margin: 1.5rem 0;
}

.divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: var(--glass-border);
}

.divider span {
    background: var(--primary-gradient);
    padding: 0 1rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.social-login {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.btn-social {
    border-radius: 15px;
    padding: 0.75rem 1rem;
    font-weight: 500;
    transition: var(--transition);
    border: 2px solid var(--glass-border);
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
}

.btn-google {
    color: #db4437;
}

.btn-google:hover {
    background: #db4437;
    color: white;
    transform: translateY(-2px);
}

.btn-facebook {
    color: #4267B2;
}

.btn-facebook:hover {
    background: #4267B2;
    color: white;
    transform: translateY(-2px);
}

.form-check-input:checked {
    background-color: #667eea;
    border-color: #667eea;
}

.form-check-label {
    color: var(--text-primary);
    font-weight: 500;
}
</style>

<script>
// Toggle password visibility
document.getElementById('togglePassword').addEventListener('click', function() {
    const password = document.getElementById('password');
    const icon = this.querySelector('i');
    
    if (password.type === 'password') {
        password.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        password.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
});

// Add focus effects to form inputs
document.querySelectorAll('.form-control').forEach(input => {
    input.addEventListener('focus', function() {
        this.parentElement.classList.add('focused');
    });
    
    input.addEventListener('blur', function() {
        if (!this.value) {
            this.parentElement.classList.remove('focused');
        }
    });
});
</script>
{% endblock %}